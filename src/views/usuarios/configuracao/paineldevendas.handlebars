{{>usuario/_top-css}}
<style>
    /* The device with borders */
    .smartphone {
        position: relative;
        width: 340px;
        height: 640px;
        margin: auto;
        border: 16px black solid;
        border-top-width: 60px;
        border-bottom-width: 60px;
        border-radius: 36px;
    }

    /* Barra de volume */
    .smartphone:before {
        content: '';
        display: block;
        width: 60px;
        height: 5px;
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #333;
        border-radius: 10px;
    }

    /* Botão*/
    .smartphone:after {
        content: '';
        display: block;
        width: 35px;
        height: 35px;
        position: absolute;
        left: 50%;
        bottom: -65px;
        transform: translate(-50%, -50%);
        background: #333;
        border-radius: 50%;
    }

    /* Conteudo */
    .smartphone .content {
        width: 360px;
        height: 640px;
        background: white;
    }
</style>
<style>
    input[type="radio"] {
        position: absolute;
        visibility: hidden;
    }

    .label-avatar {
        display: block;
        border: 3px solid rgb(255, 255, 255);
        float: left;
    }

    input[type="radio"]:checked+.label-avatar {
        border-color: rgb(155, 155, 250);
    }
</style>

<style>
    .file {
        opacity: 0;
        width: 0.1px;
        height: 0.1px;
        position: absolute;
    }

    .file-input label {
        display: block;
        position: relative;
        width: 200px;
        height: 50px;
        border-radius: 25px;
        background: rgba(36, 46, 64);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-weight: bold;
        cursor: pointer;
        transition: transform .2s ease-out;
    }

    input:hover+label,
    input:focus+label {
        transform: scale(1.02);
    }


    .file-name {
        position: absolute;
        bottom: -35px;
        left: 10px;
        font-size: 0.85rem;
        color: #555;
    }
</style>

<div class="container-fluid bg-soft">
    <div class="row">
        <div class="col-12">
            {{>usuario/_menu}}

            <main class="content">

                <div class="">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb breadcrumb-dark breadcrumb-transparent">
                            <li class="breadcrumb-item"><a href="/dashboard"><span class="fas fa-home"></span></a></li>
                            <li class="breadcrumb-item"><a href="#">Perfil</a></li>

                        </ol>
                    </nav>
                </div>

                <div class="row">

                    <div class="col-12 col-xl-8">
                        <div class="card card-body bg-white border-light shadow-sm mb-4">
                            <h2 class="h5 mb-4">Informações Gerais</h2>
                            <form action="/usuario/edit-perfil-infos-gerais" method="POST">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <div>
                                            <label for="primeiroNome">Primeiro Nome</label>
                                            <input class="form-control" id="primeiroNome" name="primeiroNome"
                                                type="color" value="{{usuario.primeiroNome}}" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div>
                                            <label for="nomeCompleto">Nome Completo</label>
                                            <input class="form-control" id="nomeCompleto" name="nomeCompleto"
                                                type="text" value="{{usuario.nomeCompleto}}" required>
                                        </div>
                                    </div>
                                    <div class="file-input">
                                        <input type="file" id="file" class="file">
                                        <label for="file">
                                            Modelo de file type.
                                            <p class="file-name"></p>
                                        </label>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div>
                                            <label for="email">E-mail</label>
                                            <input class="form-control" id="email" name="email" type="email"
                                                value="{{usuario.email}}" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div>
                                            <label for="cpf">CPF&nbsp;&nbsp;<span class="d-inline" id="cpfResponse"
                                                    name="cpfResponse"></span></label></label>
                                            <input class="form-control" id="cpf" name="cpf" onkeyup="cpfCheck(this)"
                                                maxlength="18" onkeydown="javascript: fMasc( this, mCPF );"
                                                onblur="cpfvalid(this)" type="text" value="{{usuario.cpf}}" required>
                                        </div>
                                    </div>
                                    <script>
                                        $('#cpf').mask('000.000.000-00')
                                    </script>
                                </div>

                                <hr>

                                <div class="row align-items-center">
                                    <div class="col-md-6 mb-3">
                                        <label for="timeZone">Fuso horário</label>
                                        <select class="form-select mb-0" id="timeZone" name="timeZone">
                                            <option value="-05:00">(UTC-05:00) Rio Branco</option>
                                            <option value="-04:00">(UTC-04:00) Cuiabá</option>
                                            <option value="-03:00">(UTC-03:00) Brasília</option>
                                            <option value="-02:00">(UTC-02:00) Fernando de Noronha</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="estabelecimentoSelecionado">Estabelecimento selecionado</label>
                                        <select class="form-select mb-0" id="estabelecimentoSelecionado"
                                            name="estabelecimentoSelecionado">
                                            <option value="">Todos</option>
                                            {{#each usuario.estabelecimentosVinculados}}
                                            <option value="{{_id}}">{{nome}} - {{cnpj}}</option>
                                            {{/each}}
                                        </select>
                                    </div>
                                    <script>
                                        $('#timeZone option[value="{{usuario.timeZone}}"').prop('selected', 'selected').change();
                                        $('#estabelecimentoSelecionado option[value="{{usuario.estabelecimentoSelecionado}}"').prop('selected', 'selected').change();
                                    </script>
                                </div>
                                <div class="mt-3">
                                    <button type="submit" class="btn btn-primary">Salvar</button>
                                </div>
                            </form>
                        </div>

                        <div class="card card-body bg-white border-light shadow-sm mb-4">
                            <h2 class="h5 mb-4">Senha</h2>
                            <form action="/usuario/trocar-senha" method="POST">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <div>
                                            <label for="senhaAtual">Senha nova</label>
                                            <input class="form-control" id="novaSenha" name="novaSenha" type="password"
                                                required>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div>
                                            <label for="novaSenha">Confirmar senha</label>
                                            <input class="form-control" id="confirmaSenha" name="confirmaSenha"
                                                type="password" required>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-3">
                                    <button type="submit" class="btn btn-primary">Alterar Senha</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-13 col-xl-3">
                        <div class="row">
                            <div class="col-12 mb-3">
                                <div class="smartphone card border-light text-center p-0">
                                    <div class="profile-cover rounded-top"
                                        style="background-color: rgb(201, 201, 201);widht: 50px;"></div>
                                    <div class="card-body pb-5">
                                        <img src="/img/perfil-avatar/svg/chef.svg"
                                            class="user-avatar smart-avatar rounded-circle mx-auto mt-n6 mb-4"
                                            alt="Neil Portrait">
                                        <h4 class="h3">{{usuario.primeiroNome}}</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>

            </main>

        </div>
    </div>
</div>


<script>
    const file = document.querySelector('#file');
    file.addEventListener('change', (e) => {
        // Get the selected file
        const [file] = e.target.files;
        // Get the file name and size
        const { name: fileName, size } = file;
        // Convert size in bytes to kilo bytes
        const fileSize = (size / 1000).toFixed(2);
        // Set the text content
        const fileNameAndSize = `${fileName} - ${fileSize}KB`;
        document.querySelector('.file-name').textContent = fileNameAndSize;
    });
</script>

{{>usuario/_rodape}}

{{>_msg}}